<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Spree Ember - An Ember Ecosystem for Spree Commerce</title>
  <link rel="stylesheet" href="">
  <link rel="stylesheet" href="./assets/vendor/prism/prism.css">

  <link rel="stylesheet" href="./assets/vendor/foundation/css/normalize.css">
  <link rel="stylesheet" href="./assets/vendor/foundation/css/foundation.min.css">

  <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,700,300,600,800,400' rel='stylesheet' type='text/css'>

  <link href='http://fonts.googleapis.com/css?family=Cabin:400,500,600,700,400italic,500italic,600italic,700italic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic' rel='stylesheet' type='text/css'>

  <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="./assets/css/spree-ember.css">

  <meta content="http://www.spree-ember.com/assets/img/header.jpg" property="og:image">
  <meta content="Spree Ember" property="og:title">
  <meta content="/" property="og:url">
  <meta content="An Ember Ecosystem for Spree Commerce." property="og:description">  

  <link rel="shortcut icon" type="image/png" href="./assets/favicon.png">
</head>

<body>
  <header>
    <div class="links">
      <a href="http://www.spree-ember.com/1-overview.html" id="guides-link">Guides</a> -
      <a href="http://www.spree-ember.com/packages.html">API</a> -
      <a href="https://github.com/hhff/spree-ember"><img src="./assets/img/github-120px.png"/> Github</a>
    </div>
    <div class="info">
      <a href="http://www.spree-ember.com">
        <img class="logo" src="./assets/img/logo.svg"/>
      </a>
      <h5>An Ember Ecosystem</h5>
      <h5>For Spree Commerce</h5>
    </div>
  </header>

  <section class="container" id="main">
    <div class="text-center" id="main-package-name">
      <h3><a href="http://www.spree-ember.com/checkouts/index.html">spree-ember-checkouts</a></h3>
    </div>
    <div class="row" id="docs-content">
      <div id="sidebar-content" class="small-12 large-3 columns panel">
<h3>Classes</h3>
<hr>
<ul class="side-nav yuidoc-classes">
    <li><a href="./classes/Mixin.CurrentOrderSupport.html">Mixin.CurrentOrderSupport</a></li>
    <li><a href="./classes/Serializer.Order.html">Serializer.Order</a></li>
    <li><a href="./classes/Service.Checkouts.html">Service.Checkouts</a></li>
</ul>
      </div>
      <div id="main-content" class="small-12 large-9 columns">
<h1 id="spree-ember-checkouts">Spree Ember Checkouts</h1>
<p><a href="https://travis-ci.org/hhff/spree-ember"><img src="https://travis-ci.org/hhff/spree-ember.svg?branch=master" alt="Build Status"></a>
<a href="https://gitter.im/hhff/spree-ember?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/hhff/spree-ember"></a></p>
<p>Spree Ember Checkouts uses <a href="">Ember FSM</a>
to define a Stateful Checkouts abstraction as a service for writing reactive
single page checkout flows.  It exclusively uses the <a href="">Spree Checkouts API</a>
with an Order Serializer to transiton an order to completion, and populate the
order&#39;s <code>DS.Errors</code> attribute when server validation fails.</p>
<p>This addon also adds <code>currentOrder</code> session support to the central spree service.</p>
<p><strong>Note:</strong> This Package is included with <code>spree-ember-storefront</code>.  If you&#39;re
using that, there&#39;s no need to install this seperately.</p>
<p>It uses:</p>
<ul>
<li><a href="http://www.spree-ember.com/core/index.html">Spree Ember Core</a></li>
<li><a href="https://github.com/heycarsten/ember-fsm">Ember FSM</a></li>
</ul>
<h2 id="installation">Installation</h2>
<pre><code class="lang-bash">ember install spree-ember-checkouts
</code></pre>
<p>For full Spree Ember documentation, visit <a href="http://www.spree-ember.com">http://www.spree-ember.com/</a>.</p>
<p>For more information on using ember-cli, visit <a href="http://www.ember-cli.com/">http://www.ember-cli.com/</a>.</p>
<h2 id="order-management">Order Management</h2>
<p>The <code>addToCart</code> function will create an order if one doesn&#39;t currently exist,
and then add a variant to cart.  You can optionally pass in a quantity, too!</p>
<pre><code class="lang-javascript">this.spree.get(&#39;currentOrder&#39;);
// =&gt; null

var _this = this;
this.spree.addToCart(variantModel).then(function() {
  _this.spree.get(&#39;currentOrder.state&#39;);
  // =&gt; &quot;cart&quot;

  _this.spree.clearCurrentOrder();
  _this.spree.get(&#39;currentOrder&#39;);
  // =&gt; null
});
</code></pre>
<h2 id="advancing-an-order-through-the-checkout">Advancing an Order through the Checkout</h2>
<p>All order state manipulation is done exclusively through the <code>transition</code> 
function.  Under the hood, it triggers state transitions on the checkouts Finite 
State Machine, to ensure the frontend state stays in sync with Spree&#39;s Order 
State Machine.</p>
<p>The Checkouts service is designed to allow a reactive style of programming for
the checkout flow, allowing the developer to focus on the User experience, and
trust that the internals of the State Machine will clear up and reconsolidate
user edge cases.</p>
<pre><code class="lang-javascript">var checkouts = this.spree.get(&#39;checkouts&#39;);

checkouts.transition().then(
  function() {
    checkouts.get(&#39;currentState&#39;);
    // =&gt; &quot;delivery&quot;
    checkouts.get(&#39;currentOrder.state&#39;);
    // =&gt; &quot;delivery&quot;

    checkouts.transition(&quot;address&quot;).finally(function() {
      checkouts.get(&#39;currentState&#39;);
      // =&gt; &quot;address&quot;
      checkouts.get(&#39;currentOrder.state&#39;);
      // =&gt; &quot;delivery&quot;
    });
  }
);
</code></pre>
<p>In the above example, the Checkouts <code>currentState</code> diverges from the
<code>currentOrder</code> state when moving backward.  This is expected behaviour - the
states will reconsolidate when the order advances forward again.</p>
<p><strong>Note:</strong> This is an example of why it&#39;s important to use the Checkouts service
as the canoncial state to represent in the UI, and not the <code>currentOrder</code>
directly.</p>
<h2 id="subscribing-to-checkout-events">Subscribing to Checkout Events</h2>
<p>The Spree Checkouts package also supports a event bus / callback style 
architecture.  This is useful for binding events to Google Analytics, and such.</p>
<pre><code class="lang-javascript">this.spree.on(&#39;didAddToCart&#39;, function(lineItem) {
  alert(lineItem.get(&#39;variant.name&#39;) + &quot; added to cart!&quot;);
});
</code></pre>
<h4 id="-for-more-information-please-see-the-spree-ember-checkouts-api-documentation-http-www-spree-ember-com-checkouts-index-html-"><strong>For more information, please see the <a href="http://www.spree-ember.com/checkouts/index.html">spree-ember-checkouts API Documentation.</a></strong></h4>
      </div>
    </div>
  </div>

  <footer class="row collapse">
    <div class="small-12 columns text-center">
      <hr />
      <h6>Spree Ember is Open Source under the MIT License.</h6>
      <iframe src="https://ghbtns.com/github-btn.html?user=hhff&repo=spree-ember&type=star&count=true&size=large" frameborder="0" scrolling="0" width="160px" height="30px"></iframe>
    </div>
  </footer>

<script src="./assets/vendor/foundation/js/vendor/fastclick.js"></script>
<script src="./assets/vendor/foundation/js/vendor/jquery.js"></script>
<script src="./assets/vendor/foundation/js/vendor/jquery.cookie.js"></script>
<script src="./assets/vendor/foundation/js/vendor/modernizr.js"></script>
<script src="./assets/vendor/foundation/js/vendor/placeholder.js"></script>

<script src="./assets/vendor/foundation/js/foundation.min.js"></script>
<script src="./assets/vendor/prism/prism.js"></script>

<script>$(document).foundation();</script>

<script>
  $('.private-toggle').on('click', function() {
    var $this = $(this);
    var checked = $this.find('input').first().is(':checked');
    if (checked) {
      $this.siblings('.private').css({
        display: 'block'
      })
    } else {
      $this.siblings('.private').css({
        display: 'none'
      })
    }

  })
</script>


</body>
</html>
